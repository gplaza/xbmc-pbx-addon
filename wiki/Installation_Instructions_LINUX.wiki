#labels Phase-Deploy
#These are the installation instructions for the LiveCD install, but should work fine for all flavors of Linux.

= Introduction =

The process for installing this script is different than installing a plugin. Please follow the directions here, and if you have trouble post them here: http://forum.xbmc.org/showthread.php?t=71206


= Details =

==1. Get the code:==
I like to make a directory for my source for different projects:
{{{
josh-laptop$ mkdir ~/source
josh-laptop$ svn checkout http://xbmc-pbx-addon.googlecode.com/svn/trunk/ xbmc-pbx-addon-read-only
josh-laptop$ cd xbmc-pbx-addon-read-only/
}}}

==2. Move files around:==
{{{
josh-laptop$mv script.xbmc-pbx-addon/ ~/.xbmc/addons/
josh-laptop$cd ~/.xbmc/addons/script.xbmc-pbx-addon/
}}}
Using your favorite FTP program move the folder server_side to your PBX.

==3. PBX Time:==
1. Put the xbmc-pbx-addon.php somewhere you can access it from a browser.
2. Using a standard install of FreePBX and Asterisk I did not have to change any values in the php file.
3. Add the values you want from manager_custom.conf to /etc/asterisk/manager.conf 
4. Add the information from extensions_custom.conf.sample to your own extensions_custom.conf *DO NOT OVERWRITE THAT* That should be located /etc/asterisk/extensions_custom.conf
5. (optional) To stop Fail2Ban from banning XBMC while setting it up set ignoreip = [IP OF XBMC] in /etc/fail2ban/jail.conf

==4. Reboot XBMC==

==5. Setup Values in XBMC==
1. Be very careful to put the correct values for AMI (the ones you put in manager.conf) and set the server to the correct IP address, as well as the correct web address.

==6. Reboot PBX ==
Alternatively:
{{{
root-pbx$amportal restart
root-pbx$service fail2ban restart
}}}

==7. Reboot one more time.==

==8. That should be good to go.==